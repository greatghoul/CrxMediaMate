<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>视频版式选择测试</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f5f5f5;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .timing-info {
      background-color: #e8f4f8;
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 20px;
      border-left: 4px solid #2196F3;
    }
    .orientation-preview {
      display: flex;
      gap: 40px;
      justify-content: center;
      margin: 30px 0;
    }
    .preview-card {
      text-align: center;
      padding: 20px;
      border: 2px solid #e9ecef;
      border-radius: 10px;
      background: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
    }
    .preview-card:hover {
      border-color: #007bff;
      box-shadow: 0 4px 12px rgba(0,123,255,0.15);
      transform: translateY(-2px);
    }
    .preview-frame {
      margin: 0 auto 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 3px solid #007bff;
      border-radius: 8px;
      background: linear-gradient(135deg, #007bff, #0056b3);
      color: white;
      font-weight: bold;
      font-size: 14px;
    }
    .landscape-frame {
      width: 120px;
      height: 68px;
    }
    .portrait-frame {
      width: 68px;
      height: 120px;
    }
    .specs-table {
      background-color: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
    }
    .specs-table table {
      width: 100%;
      border-collapse: collapse;
    }
    .specs-table th, .specs-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #dee2e6;
    }
    .specs-table th {
      background-color: #e9ecef;
      font-weight: bold;
    }
    .feature-list {
      background-color: #d4edda;
      padding: 15px;
      border-radius: 5px;
      margin: 10px 0;
      border-left: 4px solid #28a745;
    }
    .improvement {
      background-color: #fff3cd;
      padding: 15px;
      border-radius: 5px;
      margin: 10px 0;
      border-left: 4px solid #ffc107;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>🎬 视频版式选择功能测试</h1>
    
    <div class="timing-info">
      <h3>📱 新功能说明</h3>
      <p><strong>功能:</strong> 用户可以在生成视频前选择横版或竖版</p>
      <p><strong>横版视频:</strong> 适合电脑和电视观看，4K分辨率 (3840×2160)</p>
      <p><strong>竖版视频:</strong> 适合抖音、快手等移动端平台，1080p分辨率 (1080×1920)</p>
    </div>

    <div class="orientation-preview">
      <div class="preview-card">
        <div class="preview-frame landscape-frame">16:9</div>
        <h4>横版视频</h4>
        <p><strong>3840 × 2160</strong></p>
        <small>适合电脑和电视</small>
      </div>
      
      <div class="preview-card">
        <div class="preview-frame portrait-frame">9:16</div>
        <h4>竖版视频</h4>
        <p><strong>1080 × 1920</strong></p>
        <small>适合抖音、快手</small>
      </div>
    </div>

    <div class="specs-table">
      <h3>📊 详细规格对比</h3>
      <table>
        <thead>
          <tr>
            <th>项目</th>
            <th>横版视频</th>
            <th>竖版视频</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>分辨率</td>
            <td>3840 × 2160 (4K)</td>
            <td>1080 × 1920 (1080p)</td>
          </tr>
          <tr>
            <td>宽高比</td>
            <td>16:9</td>
            <td>9:16</td>
          </tr>
          <tr>
            <td>VP9 码率</td>
            <td>25 Mbps</td>
            <td>15 Mbps</td>
          </tr>
          <tr>
            <td>VP8 码率</td>
            <td>20 Mbps</td>
            <td>12 Mbps</td>
          </tr>
          <tr>
            <td>音频码率</td>
            <td>320 kbps</td>
            <td>320 kbps</td>
          </tr>
          <tr>
            <td>帧率</td>
            <td>30 fps</td>
            <td>30 fps</td>
          </tr>
          <tr>
            <td>适用平台</td>
            <td>电脑、电视、YouTube</td>
            <td>抖音、快手、微信视频号</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="feature-list">
      <h3>✅ 功能特点</h3>
      <ul>
        <li><strong>用户友好:</strong> 提供直观的版式选择界面</li>
        <li><strong>自动优化:</strong> 根据版式自动调整分辨率和码率</li>
        <li><strong>平台适配:</strong> 横版适合传统媒体，竖版适合移动端</li>
        <li><strong>高质量:</strong> 保持相同的音频质量和播放逻辑</li>
        <li><strong>智能命名:</strong> 下载文件名包含版式信息</li>
      </ul>
    </div>

    <div class="improvement">
      <h3>🔧 技术实现</h3>
      <pre style="background: #f8f9fa; padding: 10px; border-radius: 5px; overflow-x: auto;">
// 版式选择处理
const handleOrientationSelect = (orientation) => {
  setVideoOrientation(orientation);
  setShowOrientationSelector(false);
  generateVideo(orientation);
};

// 根据版式设置视频尺寸
if (orientation === 'portrait') {
  // 竖版视频 (9:16) - 适合抖音
  videoWidth = 1080;
  videoHeight = 1920;
} else {
  // 横版视频 (16:9) - 使用4K分辨率
  videoWidth = 3840;
  videoHeight = 2160;
}

// 根据版式调整码率
const isPortrait = orientation === 'portrait';
const vp9BitRate = isPortrait ? 15000000 : 25000000;
const vp8BitRate = isPortrait ? 12000000 : 20000000;
      </pre>
    </div>

    <div class="timing-info">
      <h3>📱 使用流程</h3>
      <ol>
        <li>用户点击"生成视频"按钮</li>
        <li>弹出版式选择模态框</li>
        <li>用户选择横版或竖版</li>
        <li>系统根据选择设置相应的分辨率和码率</li>
        <li>开始生成对应版式的视频</li>
        <li>下载时文件名包含版式信息</li>
      </ol>
    </div>

    <div class="feature-list">
      <h3>🎯 预期效果</h3>
      <ul>
        <li><strong>横版视频:</strong> 沙雕视频_横版_2025-07-07.webm</li>
        <li><strong>竖版视频:</strong> 沙雕视频_竖版_2025-07-07.webm</li>
        <li><strong>播放逻辑:</strong> 保持相同的图片显示和音频播放时序</li>
        <li><strong>质量保证:</strong> 根据版式优化码率，确保最佳观看效果</li>
      </ul>
    </div>

    <script>
      // 模拟版式选择流程
      function simulateOrientationSelection() {
        console.log("=== 版式选择流程模拟 ===");
        
        const scenarios = [
          {
            name: "横版视频生成",
            orientation: "landscape",
            width: 3840,
            height: 2160,
            vp9BitRate: 25000000,
            vp8BitRate: 20000000,
            platform: "电脑、电视、YouTube"
          },
          {
            name: "竖版视频生成", 
            orientation: "portrait",
            width: 1080,
            height: 1920,
            vp9BitRate: 15000000,
            vp8BitRate: 12000000,
            platform: "抖音、快手、微信视频号"
          }
        ];
        
        scenarios.forEach((scenario, index) => {
          console.log(`${index + 1}. ${scenario.name}:`);
          console.log(`   分辨率: ${scenario.width} × ${scenario.height}`);
          console.log(`   VP9 码率: ${(scenario.vp9BitRate / 1000000).toFixed(0)} Mbps`);
          console.log(`   VP8 码率: ${(scenario.vp8BitRate / 1000000).toFixed(0)} Mbps`);
          console.log(`   适用平台: ${scenario.platform}`);
          console.log(`   文件名: 沙雕视频_${scenario.orientation === 'portrait' ? '竖版' : '横版'}_2025-07-07.webm`);
          console.log("");
        });
        
        // 在页面上显示结果
        const resultDiv = document.createElement('div');
        resultDiv.className = 'improvement';
        resultDiv.innerHTML = `
          <h3>🎬 模拟结果</h3>
          <p>已在控制台输出详细的版式选择流程模拟结果</p>
          <p><strong>检查要点:</strong></p>
          <ul>
            <li>版式选择界面是否直观易用</li>
            <li>分辨率和码率是否正确设置</li>
            <li>文件命名是否包含版式信息</li>
            <li>视频质量是否符合平台要求</li>
          </ul>
        `;
        document.body.appendChild(resultDiv);
      }
      
      // 页面加载后执行模拟
      window.addEventListener('load', simulateOrientationSelection);
    </script>
  </div>
</body>
</html>
